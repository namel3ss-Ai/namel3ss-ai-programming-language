model "retriever":
  provider "openai"

ai "rewrite_question":
  model "retriever"
  input from "user_input"
  description "Rewrite the question to be concise and retrieval-friendly."

ai "lookup_context":
  model "retriever"
  input from "user_input"
  description "Locate the most relevant context for the rewritten question."

ai "compose_answer":
  model "retriever"
  input from "user_input"
  description "Compose a short answer grounded in the retrieved context."

flow "qa_flow":
  description "Rewrite the question, fetch context, and compose an answer."
  step "rewrite":
    kind "ai"
    target "rewrite_question"
  step "fetch":
    kind "ai"
    target "lookup_context"
  step "answer":
    kind "ai"
    target "compose_answer"

app "rag_qa_app":
  entry_page "qa_home"
  description "RAG-style Q&A over a small built-in knowledge note."

page "qa_home":
  route "/rag-qa"
  title "RAG Q&A"
  section "prompt":
    component "text":
      value "Ask a question about Namel3ss capabilities."
  section "ask":
    component "form":
      value "Enter your question and run qa_flow."
