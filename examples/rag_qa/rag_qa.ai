use model "retriever" provided by "openai"

ai "rewrite_question":
  when called:
    use model "retriever"
    input comes from user_input
    describe task as "Rewrite the question to be concise and retrieval-friendly."

ai "lookup_context":
  when called:
    use model "retriever"
    input comes from user_input
    describe task as "Locate the most relevant context for the rewritten question."

ai "compose_answer":
  when called:
    use model "retriever"
    input comes from user_input
    describe task as "Compose a short answer grounded in the retrieved context."

flow "qa_flow":
  description "Rewrite the question, fetch context, and compose an answer."
  this flow will:
    first step "rewrite":
      do ai "rewrite_question"
    then step "fetch":
      do ai "lookup_context"
    finally step "answer":
      do ai "compose_answer"

app "rag_qa_app":
  starts at page "qa_home"
  description "RAG-style Q&A over a small built-in knowledge note."

page "qa_home":
  found at route "/rag-qa"
  titled "RAG Q&A"
  section "prompt":
    show text:
      "Ask a question about Namel3ss capabilities."
  section "ask":
    show form asking:
      "Enter your question and run qa_flow."
